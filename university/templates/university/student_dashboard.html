<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Student Dashboard</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      h1 {
        margin-bottom: 5px;
      }
      h2 {
        margin-top: 30px;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 10px;
      }
      th, td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: left;
      }
      th {
        background: #f0f0f0;
      }
      button {
        padding: 5px 10px;
        border: none;
        border-radius: 4px;
        background: #b00020;
        color: #fff;
        cursor: pointer;
      }
      button:hover {
        background: #d32f2f;
      }
      .nav-links {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Student Dashboard</h1>
    <div style="display: flex; justify-content: space-between">
        <p>Welcome, {{ student.first_name }} {{ student.last_name }} ({{ student.email }})</p>
        <div class="nav-links">
            <a href="{% url 'student_logout' %}">Logout</a> 
        </div>
    </div>

    <h2>Currently Enrolled Courses</h2>

    {% if enrollment_rows %}
      <table>
        <thead>
          <tr>
            <th>Course Code</th>
            <th>Course Name</th>
            <th>Term</th>
            <th>Instructor</th>
            <th>Lab Grade</th>
            <th>Assignment Grade</th>
            <th>Midterm Grade</th>
            <th>Final Grade</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for row in enrollment_rows %}
            <tr>
              <td>{{ row.course_code }}</td>
              <td>{{ row.course_name }}</td>
              <td>{{ row.term }}</td>
              <td>{{ row.instructor_name }}</td>
              <td>{% if row.lab_grade is not None %}{{ row.lab_grade }}{% else %}N/A{% endif %}</td>
              <td>{% if row.assignment_grade is not None %}{{ row.assignment_grade }}{% else %}N/A{% endif %}</td>
              <td>{% if row.midterm_grade is not None %}{{ row.midterm_grade }}{% else %}N/A{% endif %}</td>
              <td>{% if row.final_grade is not None %}{{ row.final_grade }}{% else %}N/A{% endif %}</td>
              <td>
                <form method="post" action="{% url 'student_drop_course' row.section_id %}">
                    {% csrf_token %}
                    <button type="submit">Drop</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>You are not currently enrolled in any courses.</p>
    {% endif %}

    <h2>
        <a href="{% url 'student_available_courses' %}">
            Add Courses
        </a>
    </h2>
  </body>
</html>
